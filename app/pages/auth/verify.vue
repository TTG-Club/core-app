<script setup lang="ts">
  import { StatusCodes } from 'http-status-codes';

  const {
    query: { token },
  } = useRoute();

  if (!token) {
    throw createError(getErrorResponse(StatusCodes.BAD_REQUEST));
  }

  await useFetch('/api/auth/confirm/email', {
    method: 'PUT',
    params: { token },
    onResponseError: () => {
      throw createError(getErrorResponse(StatusCodes.BAD_REQUEST));
    },
    onRequestError: () => {
      throw createError(getErrorResponse(StatusCodes.BAD_REQUEST));
    },
  });
</script>

<template>
  <NuxtLayout>
    <div class="flex h-full flex-1 flex-col justify-center gap-4">
      <h1 class="text-xl">–í–∞—à —É—á–µ—Ç–Ω–∞—è –∑–∞–ø–∏—Å—å –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–∞ ü•≥</h1>

      <span class="text-secondary"> –¢–µ–ø–µ—Ä—å –≤—ã –º–æ–∂–µ—Ç–µ –≤—ã–ø–æ–ª–Ω–∏—Ç—å –≤—Ö–æ–¥ </span>

      <div class="gap-3">
        <UButton
          href="/"
          @click.left.exact.prevent="navigateTo({ name: 'index' })"
        >
          –í–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞ –≥–ª–∞–≤–Ω—É—é
        </UButton>
      </div>
    </div>
  </NuxtLayout>
</template>
