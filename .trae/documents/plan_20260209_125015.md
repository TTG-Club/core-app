# План исправлений для `app/features/calculator/abilities`

Я провел анализ файлов в директории `app/features/calculator/abilities` и выявил ряд нарушений правил `.cursorrules`. Ниже представлен план по их устранению.

## 1. Исправление именования файлов и компонентов

- **Файл:** `ui/tabs/components/D6.vue`
- **Проблема:** Имя компонента должно состоять минимум из двух слов (Rule: _All component filenames MUST consist of at least two words_).
- **Решение:** Переименовать в `DiceD6.vue`.
- **Действия:**
  1. Переименовать файл `ui/tabs/components/D6.vue` -> `ui/tabs/components/DiceD6.vue`.
  2. Обновить импорт в `ui/tabs/components/DiceSpinner.vue`.

## 2. Перенос констант и устранение хардкода

- **Файл:** `ui/tabs/PointBuy.vue`
- **Проблема:** Хардкод значений `BUDGET`, `MIN_SCORE`, `MAX_SCORE` внутри компонента (Rule: _No Hardcoding... Move them to consts.ts_).
- **Решение:** Перенести константы в `model/consts.ts`.
- **Действия:**
  1. Добавить `BUDGET`, `MIN_SCORE`, `MAX_SCORE` в `model/consts.ts`.
  2. Импортировать их в `ui/tabs/PointBuy.vue`.

## 3. Исправление путей импорта (Aliases)

- **Файлы:** `ui/tabs/RandomRoll.vue`, `ui/tabs/components/DiceSpinner.vue`, `model/types.ts`
- **Проблема:** Использование полных путей `~/features/dice-roller/...` вместо алиасов домена (Rule: _Cross-Feature... ALWAYS use the generated domain alias_).
- **Решение:** Заменить на `~dice-roller/...`.
- **Действия:**
  1. Обновить импорты в указанных файлах.

## 4. Рефакторинг кода и шаблонов (Template Hygiene & Naming)

Устранение однобуквенных переменных (Rule: _STRICT NO SINGLE LETTERS_) и извлечение логики из шаблонов (Rule: _Extraction Required_).

### `ui/BonusFeats.vue`

- Исправить однобуквенные переменные в колбэках (`c`, `f`, `k`, `v` -> `cls`, `feat`, `key`, `value`).
- Извлечь инлайн-хендлер с утверждением типа `@update:ability-choice` в метод `handleEpicAbilityUpdate` с проверкой типа (Rule: _No Assertions_).

### `ui/ScoreDisplay.vue`

- Переименовать `item` в `scoreItem` (Rule: _No abstract names_).

### `ui/tabs/RandomRoll.vue`

- Исправить однобуквенные переменные (`p`, `v`, `res` -> `pair`, `value`, `result`).
- Извлечь логику из `@update:model-value` в метод `handleAssignmentUpdate`.

### `ui/tabs/StandardArray.vue`

- Исправить однобуквенные переменные (`k`, `v` -> `key`, `value`).
- Извлечь логику из `@update:model-value` (`Number(v)`) в метод `handleScoreUpdate`.

### `ui/components/BonusBackgrounds.vue`

- Исправить однобуквенные переменные (`k` -> `key`).

### Остальные компоненты (`BonusClassLevel`, `BonusEpicBoon`, `BonusFeatSlot`, `BonusGeneralFeats`)

- Проверка и исправление однобуквенных переменных при наличии.

## 5. Документация (JSDoc)

- **Файл:** `composables/useAbilitiesCalculator.ts`
- **Проблема:** Отсутствует JSDoc (Rule: _All utility functions... MUST have JSDoc in Russian_).
- **Решение:** Добавить описание функции, параметров и возвращаемого значения на русском языке.

## 6. Финальная проверка

- Запуск линтера и проверка типов для подтверждения отсутствия регрессий.
